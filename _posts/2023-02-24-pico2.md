---
layout: post
title: Pi Pico 中断
date: 2023-02-23
author: H_On
description: 记录重新捡起物联网技术的开始【未完成，中断代码有问题，手边缺少传感器，之后再进行后续学习】
tag: 树莓派
---

### 目录
- [目录](#目录)
- [前言](#前言)
- [中断](#中断)
- [模拟输入](#模拟输入)
- [末尾闲言](#末尾闲言)

### 前言
话说 [上一回](https://hybrogen.github.io/2023/02/pico1/) 我们了解了如何开始使用 `MicroPython` 对 Pi Pico 进行一些编程控制。

现在，让我们继续把 Pico 连接电脑，打开 Thonny 开始进行下一环节~
> 如果 Thonny 的命令行没有显示表示已连接的提示文字，点一下上面的 “停止” 按钮，或许就可以了

### 中断
作为几乎所有单片机都必备的功能，中断的原理和概念不必赘述，只需要再次明确创建中断的流程：
1. 定义一个引脚为 `中断输入`，在 Pico 任何一个 GPIO 引脚都可以设定为中断引脚。
2. 创建一个 `中断处理程序` 的函数。
3. 将 `中断处理程序` 与 `中断输入` 配对。

以下代码声明了一个下拉的输入引脚，且中断定义为上升沿触发，与之前按钮输入的触发方式是一样的。此时你会发现：
* 板载 LED 是 2 秒闪烁一次
* 按下按钮后，IDE 中会输出一个提示性文字，并且灯光会快速闪烁 5 次
* 停顿 4 秒后再次以 2 秒的频率闪烁

```py
from machine import Pin
from utime import sleep

led = Pin(25, Pin.OUT)

but = Pin(16, Pin.IN, Pin.PULL_DOWN)

def int_handler(pin):
    but.irq(handler=None)
    print("Interrupt")
    for i in range(5):
        led.toggle()
        sleep(0.2)
    sleep(4)
    but.irq(handler=int_handler)

but.irq(trigger=Pin.IRQ_RISING, handler=int_handler)

while True:
    led.toggle()
    sleep(2)
```

### 模拟输入

### 末尾闲言