---
layout: post
title: Pi Pico I2C通信
date: 2023-03-05
author: H_On
description: 记录重新捡起物联网技术的开始
tag: 树莓派
---

### 目录
- [目录](#目录)
- [接线](#接线)
- [添加 ssd1306 库](#添加-ssd1306-库)
- [代码](#代码)

### 接线
|Pico|GPIO|OLED|
|:-|:-|:-|
|28|GND|GND|
|36|3V3|VCC|
|27|GP21|SCL|
|26|GP20|SDA|

![接线图](/images/20230305/DSC_0005.JPG)

### 添加 ssd1306 库
查看 Thonny 标题下方是否有工具框，没有的话 Thonny 右上角应该有一行蓝色的 “切换到一般模式”，点击之后按照提示关闭 Thonny 并重新打开，再次打开时软件标题下方（调试按钮上面）应该就有一行工具按钮了。
1. 点击 “工具”
2. 点击 “管理包”
3. 搜索 “ssd1306”
4. 找到 “ssd1306.py” 并安装（不出意外的话它就排在最上面，长这样
   ```
   micropython-ssd1306
   ssd1306 module for MicroPython
   ```

### 代码
```py
import machine
import utime
# 配置引脚功能
sda, scl = machine.Pin(20), machine.Pin(21)
# 声明 i2c 功能类
i2c = machine.I2C(0, sda=sda, scl=scl, freq=400000)

from ssd1306 import SSD1306_I2C
# 设定输出类
oled = SSD1306_I2C(128, 32, i2c)
print(i2c.scan())
# 设置字符
oled.text("Hello you~", 0, 0)
oled.text("Pi Pico", 0, 10)
oled.text("Display demo", 0, 20)
# 输出字符
oled.show()
utime.sleep(4)
# 填充屏幕全白
oled.fill(1)
oled.show()
utime.sleep(2)
# 填充屏幕全黑
oled.fill(0)
oled.show()

while True:
    oled.text("Happy birthday!", 0, 0)
    for i in range(164):
        # 将显示向右移动一位
        oled.scroll(1, 0)
        oled.show()
        utime.sleep_ms(10)
```